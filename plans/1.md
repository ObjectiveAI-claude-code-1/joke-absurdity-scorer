# Implementation Plan: joke-absurdity-scorer

## Overview

This plan outlines the implementation of `joke-absurdity-scorer`, a scalar function that evaluates the absurdity level of jokes across five distinct dimensions. The function returns a value from 0 (completely grounded) to 1 (pure absurdism).

---

## Input Schema

### Structure
```json
{
  "type": "object",
  "description": "Input for the joke absurdity scorer function.",
  "properties": {
    "joke": {
      "anyOf": [
        {
          "type": "string",
          "description": "A text joke (one-liner, absurdist story, nonsense verse, surreal narrative, etc.)"
        },
        {
          "type": "image",
          "description": "An image joke (surreal meme, dadaist comic, impossible visual juxtaposition, etc.)"
        },
        {
          "type": "video",
          "description": "A video joke (absurdist sketch, surreal TikTok, anti-comedy performance, etc.)"
        }
      ]
    }
  },
  "required": ["joke"]
}
```

### Field Descriptions
- **joke**: The joke content to be evaluated for absurdity. Supports three modalities:
  - **string**: Text-based jokes including one-liners, absurdist stories, nonsense poetry, surreal narratives
  - **image**: Visual jokes including surreal memes, dadaist comics, impossible visual juxtapositions
  - **video**: Video jokes including absurdist sketches, surreal social media content, anti-comedy performances

### Input Maps
No input maps are needed. The existential resonance task (Task 5) will use a mapped approach with five separate binary `vector.completion` sub-tasks, each evaluating a different existential theme. These are individual tasks in the tasks array, not a mapped input.

---

## Function Definition

```json
{
  "type": "scalar.function",
  "description": "Score the absurdity level of a joke. Evaluates how completely a joke departs from rational coherence across five dimensions: reality rupture, semantic dissolution, tonal commitment, internal dream logic, and existential resonance. Returns a value from 0 (completely grounded in reality) to 1 (pure absurdism). Accepts text, image, or video jokes.",
  "input_schema": { ... },
  "tasks": [
    // Task 1: Reality Rupture (5-point spectrum)
    // Task 2: Semantic Dissolution (5-point spectrum)
    // Task 3: Tonal Commitment (5-point spectrum)
    // Task 4: Internal Dream Logic (5-point spectrum)
    // Task 5a-5e: Existential Resonance (5 binary mapped tasks)
  ]
}
```

---

## Tasks Implementation

### Task 1: Reality Rupture Evaluation

**Type:** `vector.completion` with 5 response options

**System Prompt:** Expert evaluator assessing departure from physical/logical reality

**Response Options:**
1. "Grounded: Everything could happen in the real world; no impossible elements"
2. "Bent: Reality is stretched through exaggeration or hyperbole, but nothing truly impossible occurs"
3. "Fractured: Some impossible elements exist within an otherwise normal framework"
4. "Shattered: Reality is fundamentally unstable; impossible things are treated as normal"
5. "Dissolved: The concept of reality has become meaningless; pure impossibility"

**Output Expression:**
```starlark
output['scores'][0] * 0.0 + output['scores'][1] * 0.25 + output['scores'][2] * 0.5 + output['scores'][3] * 0.75 + output['scores'][4] * 1.0
```

---

### Task 2: Semantic Dissolution Evaluation

**Type:** `vector.completion` with 5 response options

**System Prompt:** Expert evaluator assessing breakdown of meaning and semantic coherence

**Response Options:**
1. "Stable: Language operates normally; words mean what they conventionally mean"
2. "Playful: Puns and double meanings exploit semantic flexibility within coherent bounds"
3. "Slippery: Meanings shift unexpectedly; context fails to anchor interpretation"
4. "Dissolving: Categories collapse; nouns become verbs, concrete becomes abstract, sense becomes nonsense"
5. "Void: Semantic content approaches zero; communication has become pure noise"

**Output Expression:**
```starlark
output['scores'][0] * 0.0 + output['scores'][1] * 0.25 + output['scores'][2] * 0.5 + output['scores'][3] * 0.75 + output['scores'][4] * 1.0
```

---

### Task 3: Tonal Commitment Evaluation

**Type:** `vector.completion` with 5 response options

**System Prompt:** Expert evaluator assessing how seriously the joke presents its absurd content

**Response Options:**
1. "Uncommitted: The joke signals awareness of its own silliness; winking, mugging, or 'so random' energy"
2. "Semi-committed: Mostly straight-faced but with occasional acknowledgment of the absurdity"
3. "Committed: Treats the absurd scenario with genuine seriousness throughout"
4. "Fully Committed: The absurdity is presented as utterly mundane; no one notices anything unusual"
5. "Transcendently Committed: The seriousness is so total it loops back to being absurd"

**Output Expression:**
```starlark
output['scores'][0] * 0.0 + output['scores'][1] * 0.25 + output['scores'][2] * 0.5 + output['scores'][3] * 0.75 + output['scores'][4] * 1.0
```

---

### Task 4: Internal Dream Logic Evaluation

**Type:** `vector.completion` with 5 response options

**System Prompt:** Expert evaluator assessing coherence within the incoherence

**Response Options:**
1. "Chaotic: Pure randomness with no internal consistency; elements are arbitrary and disconnected"
2. "Sporadic: Occasional patterns emerge but dissolve quickly; inconsistent logic"
3. "Emerging: A dream logic is partially visible; some absurd elements connect to each other"
4. "Consistent: Clear internal rules govern the absurdity; the impossible is predictable within its terms"
5. "Rigorous: The absurd framework is more strictly logical than reality itself"

**Output Expression:**
```starlark
output['scores'][0] * 0.0 + output['scores'][1] * 0.25 + output['scores'][2] * 0.5 + output['scores'][3] * 0.75 + output['scores'][4] * 1.0
```

---

### Task 5: Existential Resonance (MAPPED - 5 Binary Sub-tasks)

This dimension uses a mapped approach with five separate binary evaluations, each checking for a different existential theme.

#### Task 5a: Meaninglessness Theme

**Type:** `vector.completion` with 2 response options

**Response Options:**
1. "NO: The joke does not engage with themes of meaninglessness or futility"
2. "YES: The joke comments on futility, meaninglessness, or the absurdity of seeking meaning"

**Output Expression:**
```starlark
output['scores'][1]
```

#### Task 5b: Alienation Theme

**Type:** `vector.completion` with 2 response options

**Response Options:**
1. "NO: The joke does not engage with themes of alienation or disconnection"
2. "YES: The joke captures isolation, disconnection, or the impossibility of being truly understood"

**Output Expression:**
```starlark
output['scores'][1]
```

#### Task 5c: Arbitrary Systems Theme

**Type:** `vector.completion` with 2 response options

**Response Options:**
1. "NO: The joke does not satirize arbitrary systems or conventions"
2. "YES: The joke exposes the absurdity of bureaucracy, social norms, or human-made structures"

**Output Expression:**
```starlark
output['scores'][1]
```

#### Task 5d: Identity Dissolution Theme

**Type:** `vector.completion` with 2 response options

**Response Options:**
1. "NO: The joke does not engage with identity instability themes"
2. "YES: The joke questions who we are, the stability of the self, or the arbitrariness of identity"

**Output Expression:**
```starlark
output['scores'][1]
```

#### Task 5e: Cosmic Indifference Theme

**Type:** `vector.completion` with 2 response options

**Response Options:**
1. "NO: The joke does not evoke cosmic indifference"
2. "YES: The joke captures the feeling of being insignificant in a vast, uncaring cosmos"

**Output Expression:**
```starlark
output['scores'][1]
```

---

## Expression Summary

### User Content Expressions
All tasks will use the same user content expression to pass the joke:
```starlark
'Evaluate the [DIMENSION NAME] in this joke:\n\n' + str(input['joke'])
```

### Output Expressions

**5-Point Spectrum Tasks (1-4):**
```starlark
output['scores'][0] * 0.0 + output['scores'][1] * 0.25 + output['scores'][2] * 0.5 + output['scores'][3] * 0.75 + output['scores'][4] * 1.0
```

**Binary Tasks (5a-5e):**
```starlark
output['scores'][1]
```

The five existential theme scores are individual task outputs. Each contributes its probability (0.0 to 1.0) to the existential resonance dimension. Since they're separate tasks, the final aggregation happens at the function level where all task outputs are averaged.

---

## Test Inputs

### Test 1: Grounded/Non-Absurd Joke
```json
{
  "joke": "Why did the scarecrow win an award? Because he was outstanding in his field."
}
```
**Expected:** Low absurdity (0.1-0.3). This is a simple pun with no reality rupture, stable semantics, and no existential themes.

### Test 2: Classic Absurdist (Monty Python Style)
```json
{
  "joke": "A man walks into a pet shop and asks for a fish license. The shopkeeper explains there's no such thing. The man insists his halibut Eric needs one. After a lengthy bureaucratic discussion, it's revealed Eric is actually a dog. The man is outraged that a dog license won't work for his halibut."
}
```
**Expected:** High absurdity (0.7-0.9). Reality rupture (fish licensing), high tonal commitment (treating absurdity seriously), strong internal dream logic, arbitrary systems theme.

### Test 3: "Random" Humor (Low Quality Absurdism)
```json
{
  "joke": "LOL so random!! *holds up spork* I'm the penguin of doom! Waffles! XD"
}
```
**Expected:** Medium-low absurdity (0.3-0.5). Some reality departure, but uncommitted tone (winking at silliness), chaotic logic, no existential resonance.

### Test 4: Kafkaesque Absurdism
```json
{
  "joke": "A man applies for a job. He's told he needs Form 27B. He gets Form 27B, but now needs Form 27B-1 to validate 27B. After seventeen years, he finally has all forms. They inform him the position was filled by a potted plant, which has since been promoted to regional manager. The man congratulates the plant and returns home, where he discovers he has become the concept of waiting."
}
```
**Expected:** Very high absurdity (0.85-1.0). Maximum reality rupture (becoming a concept), dissolving semantics, transcendent commitment, rigorous dream logic, multiple existential themes (meaninglessness, alienation, arbitrary systems).

### Test 5: Surreal But Coherent
```json
{
  "joke": "In a world where emotions are traded on the stock market, a man goes bankrupt after investing everything in nostalgia. The bank forecloses on his childhood memories, which are auctioned off to a corporation that uses them to manufacture synthetic happiness."
}
```
**Expected:** High absurdity (0.7-0.85). Strong reality rupture (emotion trading), stable semantics, fully committed tone, consistent dream logic, existential themes (alienation, arbitrary systems).

### Test 6: Pure Nonsense/Semantic Void
```json
{
  "joke": "The purple of yesterday's tomorrow vibrated silently in flavors of forgotten geometry, while the concept of 'if' apologized to its own absence."
}
```
**Expected:** High absurdity (0.8-0.95). Dissolved reality, void semantics, but potentially chaotic logic (no internal rules), possible existential resonance depending on interpretation.

### Test 7: Anti-Comedy/Deadpan Absurdism
```json
{
  "joke": "A horse walks into a bar. The bartender asks, 'Why the long face?' The horse, incapable of understanding human language, knocks over several glasses with its tail. Animal control is called. The bar closes for health code violations. The horse is fine."
}
```
**Expected:** Medium-high absurdity (0.5-0.7). Fractured reality (horse in bar, but realistic consequences), stable semantics, fully committed tone, consistent logic, possible alienation theme.

### Test 8: Observational Humor (Control - Should Score Low)
```json
{
  "joke": "You know what's weird about airplane food? It's like they specifically designed it to be disappointing. The package says 'chicken' but your mouth says 'cardboard tribute to the concept of chicken.'"
}
```
**Expected:** Very low absurdity (0.0-0.2). Grounded reality, stable semantics, no absurdist elements—this is observational comedy, not absurdism.

### Test 9: Dark Absurdism with Existential Weight
```json
{
  "joke": "Death comes to collect a man's soul. The man asks for a few more minutes. Death checks his schedule and sighs—he's overbooked. They agree to reschedule for next Tuesday. The man spends the weekend not quite living, not quite dead, attending a cousin's wedding in this liminal state. No one notices anything different about him."
}
```
**Expected:** High absurdity (0.75-0.9). Reality rupture (negotiating with Death), committed tone, consistent dream logic, strong existential resonance (meaninglessness, cosmic indifference, identity).

### Test 10: Internet/Meme Absurdism
```json
{
  "joke": "Me: I should sleep\nMy brain at 3am: What if chairs could feel betrayal\nMe: ...\nMy brain: They definitely can and they're planning something"
}
```
**Expected:** Medium absurdity (0.4-0.6). Fractured reality (sentient chairs), playful semantics, semi-committed tone (meme format acknowledges absurdity), sporadic logic.

---

## Implementation Notes

1. **Task Independence:** Each of the 9 tasks (4 spectrum + 5 binary) operates independently and evaluates a distinct dimension.

2. **Mapped Implementation:** Tasks 5a-5e implement the "mapped" requirement by breaking existential resonance into 5 separate binary evaluations rather than a single spectrum.

3. **Aggregation:** The function's final output is the average of all task outputs, giving equal weight to each dimension. The existential resonance dimension effectively gets 5/9 weight due to having 5 sub-tasks.

4. **Alternative Weighting:** If equal dimension weighting is desired (not equal task weighting), the existential tasks could each multiply by 0.2 (1/5) in their output expressions, but this may be handled at the function aggregation level.

5. **Distinctiveness:** The dimensions are specifically designed to be orthogonal—a joke can score high on some dimensions and low on others (e.g., high reality rupture but chaotic logic, or committed tone but grounded reality).
